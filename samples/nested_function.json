{
  "nodes": [
    {
      "id": "define-inner",
      "op": "op_fn",
      "params": {
        "name": "multiply_by_2",
        "inputs": [
          "x"
        ],
        "outputs": [
          "result"
        ],
        "body": [
          "double",
          "return"
        ]
      }
    },
    {
      "id": "double",
      "op": "op_compute",
      "inputs": [
        "x"
      ],
      "outputs": [
        "result"
      ],
      "params": {
        "operation": "multiply"
      }
    },
    {
      "id": "return",
      "op": "op_return",
      "params": {
        "values": [
          "result"
        ]
      }
    },
    {
      "id": "define-outer",
      "op": "op_fn",
      "params": {
        "name": "add_and_double",
        "inputs": [
          "a",
          "b"
        ],
        "outputs": [
          "final"
        ],
        "body": [
          "add",
          "call-inner",
          "return-final"
        ]
      }
    },
    {
      "id": "add",
      "op": "op_compute",
      "inputs": [
        "a",
        "b"
      ],
      "outputs": [
        "sum"
      ],
      "params": {
        "operation": "add"
      }
    },
    {
      "id": "call-inner",
      "op": "op_call",
      "params": {
        "fn": "multiply_by_2",
        "args": [
          "sum"
        ],
        "results": [
          "double_sum"
        ],
        "scoped": true
      }
    },
    {
      "id": "return-final",
      "op": "op_return",
      "params": {
        "values": [
          "double_sum"
        ]
      }
    },
    {
      "id": "invoke-outer",
      "op": "op_call",
      "params": {
        "fn": "add_and_double",
        "args": [
          3,
          4
        ],
        "results": [
          "final_result"
        ],
        "scoped": true
      }
    },
    {
      "id": "show",
      "op": "op_compute",
      "inputs": [
        "final_result"
      ],
      "params": {
        "operation": "print"
      }
    }
  ]
}